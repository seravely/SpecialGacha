<!doctype html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Special Gacha Board</title>

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
  background:#ffffff;
  color:#0f172a;
}
#lock-screen{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  background:#f8fbff;
  z-index:9999;
}
#lock-screen input{
  padding:12px 14px;
  font-size:16px;
  border-radius:10px;
  border:1px solid #cbd5e1;
  outline:none;
}
#lock-screen button{
  margin-top:10px;
  padding:10px 18px;
  border-radius:999px;
  border:none;
  background:#0f172a;
  color:#fff;
  font-weight:800;
  cursor:pointer;
}
#error{
  margin-top:8px;
  color:#dc2626;
  display:none;
}

#welcome{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:900;
  background:rgba(255,255,255,0.85);
  z-index:5000;
  display:none;
}

#site{
  display:none;
  padding:24px;
  max-width:1200px;
  margin:0 auto;
}

/* ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ */
#logout{
  position:fixed;
  top:14px;
  right:18px;
  background:#fff;
  border:1px solid #e2e8f0;
  border-radius:999px;
  padding:6px 12px;
  font-weight:800;
  cursor:pointer;
}

/* === ë½‘ê¸°íŒ ìŠ¤íƒ€ì¼ (ê¸°ì¡´ ìœ ì§€) === */
.board{
  margin-top:30px;
  padding:20px;
  border-radius:24px;
  background:rgb(255,240,180);
}
.tiles{
  display:grid;
  grid-template-columns:repeat(10,1fr);
  gap:16px;
}
.tile{
  background:rgba(255,255,255,0.7);
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  aspect-ratio:1/1;
  font-weight:900;
  font-size:20px;
}
.tile.picked{
  background:#fff;
}
</style>
</head>

<body>

<!-- ğŸ”’ ë¹„ë°€ë²ˆí˜¸ í™”ë©´ -->
<div id="lock-screen">
  <h2>ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</h2>
  <input id="pw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
  <button onclick="login()">ì…ì¥</button>
  <div id="error">ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ì–´ìš”</div>
</div>

<!-- í™˜ì˜ ë¬¸êµ¬ -->
<div id="welcome"></div>

<!-- ë¡œê·¸ì•„ì›ƒ -->
<button id="logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>

<!-- ì‹¤ì œ ì‚¬ì´íŠ¸ -->
<div id="site">
  <h1>ìŠ¤í˜ì…œ ë½‘ê¸°íŒ</h1>

  <div class="board">
    <div class="tiles" id="tiles"></div>
  </div>
</div>

<script>
/* ===== ê³„ì • ì„¤ì • ===== */
const USERS = {
  "Seravelyy!": "ì„¸ë¼",
  "emo0205": "ì—ë©”ëª¨í˜„"
};

/* ===== êµ¬ê¸€ Apps Script URL ===== */
const LOG_URL = "https://script.google.com/macros/s/AKfycbxsNlX2i3ofL3yShOAOkIhyXmtO3Q9TSWj-5QTSZvsT-R0xwKfMviKyYey_B_CjubFY/exec";

/* ===== ë¡œê·¸ì¸ ===== */
function login(){
  const pw = document.getElementById("pw").value.trim();
  const name = USERS[pw];
  if(!name){
    document.getElementById("error").style.display="block";
    return;
  }

  sessionStorage.setItem("user", name);
  document.getElementById("lock-screen").style.display="none";
  document.getElementById("site").style.display="block";

  // í™˜ì˜ ë¬¸êµ¬
  const w = document.getElementById("welcome");
  w.textContent = `${name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!`;
  w.style.display="flex";
  setTimeout(()=>w.style.display="none",2000);

  // âœ… ì‹œíŠ¸ë¡œë§Œ ë¡œê·¸ ì „ì†¡ (í™”ë©´ ì¶œë ¥ âŒ)
  fetch(LOG_URL,{
    method:"POST",
    mode:"no-cors",
    headers:{ "Content-Type":"text/plain;charset=utf-8" },
    body: JSON.stringify({
      name,
      ua: navigator.userAgent,
      time: new Date().toISOString()
    })
  });
}

/* ===== ë¡œê·¸ì•„ì›ƒ ===== */
function logout(){
  sessionStorage.removeItem("user");
  location.reload();
}

/* ===== ìƒˆë¡œê³ ì¹¨ ìœ ì§€ ===== */
if(sessionStorage.getItem("user")){
  document.getElementById("lock-screen").style.display="none";
  document.getElementById("site").style.display="block";
}

/* ===== ì˜ˆì‹œ ë½‘ê¸°íŒ ===== */
const tiles = document.getElementById("tiles");
for(let i=1;i<=100;i++){
  const d=document.createElement("div");
  d.className="tile";
  d.textContent=i;
  tiles.appendChild(d);
}
</script>
</body>
</html>
